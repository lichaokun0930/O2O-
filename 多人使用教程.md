# 📖 门店数据分析看板 - 多人使用完整教程

> 适合零基础小白，一步一步教您如何让团队共同使用这个系统

---

## 🎯 学习路线图

```
第1阶段 ──> 第2阶段 ──> 第3阶段 ──> 第4阶段
局域网共享   云服务器     数据库      自动化
(今天)      (1周后)     (1个月后)   (按需)
```

---

## 📍 第1阶段：局域网共享（今天就能用）

### 适用场景
- ✅ 公司内部使用
- ✅ 大家在同一个WiFi
- ✅ 不需要外网访问

### 操作步骤

#### 步骤1: 查看您的IP地址

**Windows操作:**
1. 按 `Win + R` 键
2. 输入 `cmd` 回车
3. 输入命令: `ipconfig`
4. 找到 "IPv4 地址"，例如: `192.168.1.100`

**截图示例:**
```
以太网适配器 以太网:
   IPv4 地址 . . . . . . . . . . . . : 192.168.1.100  ← 这个就是你的IP
```

#### 步骤2: 启动看板服务

```powershell
# 1. 打开PowerShell或命令提示符
# 2. 进入项目目录
cd D:\Python1\O2O_Analysis\O2O数据分析\门店基础数据分析

# 3. 启动看板
python dashboard_v2.py
```

**看到这样的提示就成功了:**
```
🚀 启动O2O门店数据分析看板...
📊 本机访问地址: http://localhost:8053
📊 局域网访问地址: http://192.168.1.100:8053
Dash is running on http://0.0.0.0:8053/
```

#### 步骤3: 告诉同事访问地址

**同事的操作:**
1. 打开浏览器
2. 输入: `http://你的IP地址:8053`
3. 例如: `http://192.168.1.100:8053`

### ⚠️ 常见问题

**问题1: 同事访问不了**

**解决方案:**
```powershell
# 检查Windows防火墙，允许端口8053
# 方法1: 临时关闭防火墙测试
# 方法2: 添加防火墙规则

# 添加防火墙规则(管理员PowerShell运行):
New-NetFirewallRule -DisplayName "Dashboard Port 8053" -Direction Inbound -LocalPort 8053 -Protocol TCP -Action Allow
```

**问题2: IP地址经常变**

**解决方案:**
1. 设置静态IP地址
2. 或使用电脑名称访问(需要在同一个域)

---

## 📍 第2阶段：云服务器部署（推荐）

### 为什么需要云服务器？
- ✅ 外网也能访问
- ✅ 24小时运行
- ✅ 不依赖您的电脑

### 准备工作

#### 1. 购买云服务器

**推荐配置:**
- CPU: 2核
- 内存: 4GB
- 硬盘: 40GB
- 系统: Ubuntu 20.04
- 费用: 约¥100-150/月

**推荐平台:**
- 阿里云: https://www.aliyun.com/
- 腾讯云: https://cloud.tencent.com/
- 华为云: https://www.huaweicloud.com/

#### 2. 连接服务器

**工具:** 
- Windows推荐: MobaXterm (免费)
- 或使用: PuTTY

**连接信息:**
```
服务器IP: 云服务商提供
端口: 22
用户名: root
密码: 你设置的密码
```

### 部署步骤

#### 步骤1: 安装Python环境

```bash
# 更新系统
sudo apt update
sudo apt upgrade -y

# 安装Python 3.10
sudo apt install python3.10 python3.10-venv python3-pip -y

# 验证安装
python3 --version
```

#### 步骤2: 上传代码

**方法1: 使用MobaXterm (推荐新手)**
1. 打开MobaXterm
2. 连接服务器
3. 左侧看到文件管理器
4. 直接拖拽整个项目文件夹

**方法2: 使用Git**
```bash
# 如果你的代码在GitHub
git clone https://github.com/你的用户名/你的项目.git
cd 你的项目
```

#### 步骤3: 安装依赖

```bash
# 进入项目目录
cd /root/门店基础数据分析

# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate

# 安装依赖
pip install dash plotly pandas numpy openpyxl xlsxwriter dash-bootstrap-components
```

#### 步骤4: 配置开机自启

创建systemd服务文件:
```bash
sudo nano /etc/systemd/system/dashboard.service
```

内容:
```ini
[Unit]
Description=O2O Dashboard Service
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/门店基础数据分析
Environment="PATH=/root/门店基础数据分析/venv/bin"
ExecStart=/root/门店基础数据分析/venv/bin/python dashboard_v2.py
Restart=always

[Install]
WantedBy=multi-user.target
```

**启动服务:**
```bash
# 重新加载配置
sudo systemctl daemon-reload

# 启动服务
sudo systemctl start dashboard

# 设置开机自启
sudo systemctl enable dashboard

# 查看状态
sudo systemctl status dashboard
```

#### 步骤5: 配置域名（可选）

**如果你有域名:**

1. **安装Nginx:**
```bash
sudo apt install nginx -y
```

2. **配置Nginx:**
```bash
sudo nano /etc/nginx/sites-available/dashboard
```

内容:
```nginx
server {
    listen 80;
    server_name 你的域名.com;

    location / {
        proxy_pass http://127.0.0.1:8053;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

3. **启用配置:**
```bash
sudo ln -s /etc/nginx/sites-available/dashboard /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

现在访问: `http://你的域名.com`

---

## 📍 第3阶段：添加数据库（数据持久化）

### 为什么需要数据库？
- ✅ 保存历史分析记录
- ✅ 对比不同时间的数据
- ✅ 多门店数据管理

### 使用SQLite（最简单）

**优点:**
- 不需要安装数据库服务器
- 直接是一个文件
- Python内置支持

我会为您创建一个简化版的数据库模块。

---

## 📍 第4阶段：自动化处理

### 目标
- 网页上传Excel
- 自动分析
- 自动更新看板

这个阶段我会帮您实现完整的Web界面。

---

## 🆘 需要帮助？

**现在您想从哪个阶段开始？**

1. **今天就用** → 第1阶段(局域网共享)
2. **认真做** → 第2阶段(云服务器)
3. **长期用** → 第3阶段(加数据库)
4. **全自动** → 第4阶段(完整Web系统)

**告诉我您的选择，我会详细指导每一步操作！** 💪
