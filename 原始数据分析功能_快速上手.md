# 📊 Dashboard原始数据分析功能 - 快速上手

## 🚀 一分钟快速开始

### 启动看板
```powershell
python dashboard_v2.py
```
浏览器打开: http://localhost:8055

---

## 📝 使用步骤

### 1️⃣ 找到分析模块
在页面顶部,文件上传区域下方,找到:

```
┌─────────────────────────────────────────┐
│  🔬 原始数据分析                         │
│  ┌─────────────────┬──────────────────┐ │
│  │ 📁 上传原始数据  │ 📝 门店名称输入   │ │
│  │ (Excel/CSV)     │ ▶️ 开始分析按钮   │ │
│  └─────────────────┴──────────────────┘ │
└─────────────────────────────────────────┘
```

### 2️⃣ 上传原始数据
- **拖拽文件** 或 **点击选择文件**
- 支持格式: `.xlsx`, `.csv`
- 文件需包含: 商品名、售价、销量、分类

### 3️⃣ 输入门店名称
在右侧输入框输入,例如:
- "北京朝阳店"
- "上海浦东店"
- "深圳南山店"

### 4️⃣ 点击开始分析
✅ 上传文件 + ✅ 输入名称 → 按钮自动启用

### 5️⃣ 等待分析完成
⏳ 通常 10-30秒
- 小数据集(<1000行): ~5秒
- 大数据集(5000-10000行): ~30秒

### 6️⃣ 查看结果
✅ 分析完成后:
- 看板自动刷新
- 所有图表显示新门店数据
- Excel报告保存在 `./reports/` 目录

---

## 🏪 多门店切换

### 使用门店选择器
在页面右上角找到:
```
🏪 选择门店: [下拉框▼]
```

点击下拉框,选择要查看的门店:
- 默认门店
- 北京朝阳店
- 上海浦东店
- ...

切换后自动刷新所有图表!

---

## 📋 数据文件要求

### 必须包含的列 (中英文均可)

列名 | 中文变体 | 英文变体
---|---|---
商品名称 | 商品名, 品名 | product_name, name
售价 | 售价, 单价, 价格 | price, unit_price
销量 | 销量, 销售数量 | sales, quantity
一级分类 | 分类, 类别 | category, category_l1

### 可选列 (提升分析质量)

- 原价 (original_price / 原价)
- 库存 (stock / 库存)
- 规格 (spec / 规格)
- 条形码 (barcode / 条码)

### 示例数据格式

```
| 商品名 | 售价 | 销量 | 分类 |
|--------|------|------|------|
| 汉堡王双层牛肉堡 | 32 | 156 | 快餐 |
| 可口可乐500ml | 5 | 342 | 饮品 |
```

---

## ✅ 成功标志

### 分析成功后显示
```
✅ 分析完成!
   报告已保存: 北京朝阳店_分析报告.xlsx
   📊 共分析 328 个商品
```

### 报告内容 (Excel多Sheet)
1. **核心指标**: 总销售额、SKU数、客单价...
2. **商品角色**: 引流款、利润款、战略款...
3. **价格带分析**: 低价、中价、高价分布
4. **分类明细**: 各分类销售排名
5. **多规格SKU**: 多规格商品识别
6. **数据一致性**: 完整性校验

---

## ❌ 常见问题

### 按钮是灰色的?
✅ 需要 **同时满足**:
1. 已上传文件
2. 已输入门店名称

### 分析失败?
检查:
1. 文件格式 (必须是 `.xlsx` 或 `.csv`)
2. 必须包含: 商品名、售价、销量、分类
3. 数据无空行或格式错误
4. 查看错误提示信息

### 数据没变化?
1. 确认门店下拉框已切换
2. 刷新浏览器页面
3. 检查 `./reports/` 目录是否有报告

---

## 🎯 完整工作流示意

```
用户操作                  系统处理                    输出结果
───────────────────────────────────────────────────────────
1. 拖拽Excel文件         → 解码Base64              
                         → 保存到 ./temp/          

2. 输入"北京朝阳店"       → 按钮启用                
                         → 上传区高亮              

3. 点击"开始分析"         → 调用untitled1.py        
                         → 列名映射                
                         → 多规格识别              → ⏳ 分析中...
                         → 角色分类                
                         → 统计计算                

4. 等待30秒              → 生成Excel报告           → ./reports/
                                                      北京朝阳店_分析报告.xlsx
                         → 添加到门店列表          
                         → 刷新DataLoader         → ✅ 分析完成!

5. 自动刷新              → 所有图表更新            → 📊 看板显示新数据

6. 切换门店              → 重新加载报告            → 📊 显示其他门店数据
```

---

## 💡 使用技巧

### 技巧1: 批量分析多门店
```
上传门店A数据 → 分析 → 完成
上传门店B数据 → 分析 → 完成
上传门店C数据 → 分析 → 完成
→ 使用下拉框随时切换查看
```

### 技巧2: 对比分析
```
1. 分析"北京朝阳店"
2. 记录核心指标
3. 切换到"上海浦东店"
4. 对比两个门店数据
```

### 技巧3: 离线查看
```
1. 分析完成后
2. 打开 ./reports/ 目录
3. 双击 Excel 文件
4. 查看完整报告(不依赖看板)
```

---

## 📞 需要帮助?

### 查看详细文档
- `untitled1集成完成报告_v1.0.md`: 完整技术报告
- `untitled1集成方案_最终版.md`: 技术实现方案
- `.github/copilot-instructions.md`: 项目架构说明

### 运行测试
```powershell
python test_integration.py
```
验证所有功能是否正常

---

## 🎉 享受新功能!

**告别手动流程**:
- ❌ 打开终端运行 `untitled1.py`
- ❌ 等待生成报告
- ❌ 手动刷新看板

**拥抱一键分析**:
- ✅ 上传 → 点击 → 完成
- ✅ 3步搞定,30秒见效!

---

**最后更新**: 2025年  
**版本**: v1.0  
**状态**: ✅ 可用
